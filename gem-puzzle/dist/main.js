(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var l=e.g.document;if(!t&&l&&(l.currentScript&&(t=l.currentScript.src),!t)){var n=l.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();var t,l,n,r,o,s=60,i=0,a="",c=1,u=1,d=1,m=0,y=0,p=0,v=0;function g(){clearTimeout(t),c=1,u=1,d=1,m=0,y=0,p=0,v=0,i=0,a="00:00:00",document.querySelector(".time").innerHTML=a}function h(){var e=(new Date).getTime()-l.getTime()-1e3*i;e>999&&(i++,m++),m>=u*s?(y=1,u++):(y=parseInt(p/100+m))>=s&&(y-=(u-1)*s),u>c*s?(d=1,c++):(d=parseInt(p/100+u))>=s&&(d-=(c-1)*s),(p=Math.round(e/10))>99&&(p=0),0==p&&(p="00"),p>0&&p<=9&&(p="0"+p),y>0?(o=y)<10&&(o="0"+y):o="00",(r=d-1)>0?r<10&&(r="0"+r):r="00",(n=c-1)>0?n<10&&(n="0"+n):n="00",a=n+":"+r+":"+o,document.querySelector(".time").innerHTML=a;let v=document.getElementById("win-text"),g=document.querySelector(".moves");v.innerHTML=`Hooray! You solved the puzzle in ${a} and ${g.textContent} moves!`,t=setTimeout(h,1)}function b(){0==v?(g(),l=new Date,h(),v=1):(v=0,g(),clearTimeout(t))}function f(){var e=0;let t=Array.from(document.querySelectorAll(".block-puzzle"));e=t.map((e=>Number(e.dataset.matrixId))),t[(e=e[t.length-1])-1].style.display="none",E(I(t.map((e=>Number(e.dataset.matrixId))),e)),document.querySelector(".moves").innerHTML=0;let l=document.querySelector(".puzzle").querySelectorAll(".block-puzzle");for(let e of l)e.draggable=!0;g(),b(),g()}function S(e){let t=document.querySelector(".puzzle");t.innerHTML="";for(let l=1;l<=e;l++){let e=document.createElement("div"),n=document.createElement("span");n.textContent=`${l}`,e.appendChild(n),e.classList.add("block-puzzle"),e.setAttribute("data-matrix-id",`${l}`),t.appendChild(e)}}var z=!1,q=!0,k=!1,x=!1,L=!1,N=new Audio;function I(e,t){let l=[],n=Math.sqrt(t);for(let e=0;e<n;e++)l.push([]);let r=0,o=0;for(let t=0;t<e.length;t++)r>=n&&(o++,r=0),l[o][r]=e[t],r++;return l}function E(e){let t=Array.from(document.querySelectorAll(".block-puzzle"));for(let l=0;l<e.length;l++)for(let n=0;n<e[l].length;n++)w(t[e[l][n]-1],n,l)}function w(e,t,l){e.style.transform=`translate3D(${100*t}%, ${100*l}%, 0)`}function A(e,t){for(let l=0;l<t.length;l++)for(let n=0;n<t[l].length;n++)if(t[l][n]===e)return{x:n,y:l};return null}function M(e,t){const l=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return!(1!==l&&1!==n||e.x!==t.x&&e.y!==t.y)}function T(e,t,l,n){const r=l[e.y][e.x];l[e.y][e.x]=l[t.y][t.x],l[t.y][t.x]=r,function(e,t){const l=new Array(t).fill(0).map(((e,t)=>t+1)),n=e.flat();for(let e=0;e<l.length;e++)if(n[e]!==l[e])return!1;return!0}(l,n)&&function(){z=!1,L=!0;const e="won";let t=[];z=!1,setTimeout((()=>{let l=document.querySelector(".puzzle"),n=document.querySelector(".win-text"),r=document.querySelector(".time");l.classList.add(e),n.classList.add(e),n.classList.remove("win-text"),setTimeout((()=>{l.classList.remove(e),n.classList.remove(e),n.classList.add("win-text");let o=document.querySelector(".moves");t[0]=o.textContent,t[1]=r.textContent,function(e){for(let t=0;t<10;t++){let l=JSON.stringify(localStorage.getItem(`${t}`));if(l!==String(null)&&l!==String(void 0)){l=JSON.parse(l).split(",");let n=l[1].split(":"),r=e[1].split(":");(Number(n[0])>Number(r[0])||Number(n[0])===Number(r[0])&&(Number(n[1])>Number(r[1])||Number(n[2])>Number(r[2])||Number(n[2])===Number(r[2])&&Number(l[0])>Number(e[0])))&&(localStorage.setItem(`${t}`,e),e=l)}else e!==String(null)&&e!==String(void 0)&&(localStorage.setItem(`${t}`,e),e=l)}}(t),o.innerHTML=0,g(),L=!1}),1e3)}),300)}();let o=document.querySelector(".moves"),s=Number(o.textContent);o.innerHTML=s+1}N.src="./src/music/1.mp3",e.p,document.body.innerHTML='\n    <main>\n        <div class="back">\n            <div class="panel">\n                <div class="buttons">\n                    <button id="shuffle">Shuffle and start</button>\n                    <button id="easy">For easy win</button>\n                    <button id="save">Save</button>\n                    <button id="load">Load</button>\n                    <button id="results">Results</button>\n                    <button id="sound">On/off sound</button>\n                </div>\n                <div class="info">\n                    <p>Moves: <span class="moves">0</span></p>\n                    <p>Time: <span class="time">0:00</span></p>\n                </div>\n            </div>\n            <div class="puzzle">\n                <div class="block-puzzle" data-matrix-id="1"><span>1</span></div>\n                <div class="block-puzzle" data-matrix-id="2"><span>2</span></div>\n                <div class="block-puzzle" data-matrix-id="3"><span>3</span></div>\n                <div class="block-puzzle" data-matrix-id="4"><span>4</span></div>\n                <div class="block-puzzle" data-matrix-id="5"><span>5</span></div>\n                <div class="block-puzzle" data-matrix-id="6"><span>6</span></div>\n                <div class="block-puzzle" data-matrix-id="7"><span>7</span></div>\n                <div class="block-puzzle" data-matrix-id="8"><span>8</span></div>\n                <div class="block-puzzle" data-matrix-id="9"><span>9</span></div>\n            </div>\n            <div class="sizes">\n                <p>Other sizes:</p>\n                <div class="three">3x3</div>\n                <div class="four">4x4</div>\n                <div class="five">5x5</div>\n                <div class="six">6x6</div>\n                <div class="seven">7x7</div>\n                <div class="eight">8x8</div>\n            </div>\n            <h2 class="win-text" id="win-text">Вы выиграли!</h2>\n            <h2 class="save-text" id="save-text">Игра сохранена!</h2>\n        </div>\n        <div class="results-list">\n            <p>Ваши результаты!</p>\n            <ul>\n                <li class="item"></li>\n                <li class="item"></li>\n                <li class="item"></li>\n                <li class="item"></li>\n                <li class="item"></li>\n                <li class="item"></li>\n                <li class="item"></li>\n                <li class="item"></li>\n                <li class="item"></li>\n                <li class="item"></li>\n            </ul>\n        </div>\n    </main>\n',function(){const e=document.querySelector(".three"),t=document.querySelector(".four"),l=document.querySelector(".five"),n=document.querySelector(".six"),r=document.querySelector(".seven"),o=document.querySelector(".eight");e.addEventListener("click",(()=>{S(9),f()})),t.addEventListener("click",(()=>{S(16);let e=document.querySelectorAll(".block-puzzle");for(let t=0;t<e.length;t++)e[t].style.width="25%",e[t].style.height="25%";f()})),l.addEventListener("click",(()=>{S(25);let e=document.querySelectorAll(".block-puzzle");for(let t=0;t<e.length;t++)e[t].style.width="20%",e[t].style.height="20%";f()})),n.addEventListener("click",(()=>{S(36);let e=document.querySelectorAll(".block-puzzle");for(let t=0;t<e.length;t++)e[t].style.width="16.7%",e[t].style.height="16.7%";f()})),r.addEventListener("click",(()=>{S(49);let e=document.querySelectorAll(".block-puzzle");for(let t=0;t<e.length;t++)e[t].style.width="14.3%",e[t].style.height="14.3%";f()})),o.addEventListener("click",(()=>{S(64);let e=document.querySelectorAll(".block-puzzle");for(let t=0;t<e.length;t++)e[t].style.width="12.5%",e[t].style.height="12.5%";f()}))}(),function(){var e,l=[],n=0;window.onload=function(){let e=Array.from(document.querySelectorAll(".block-puzzle"));n=e.map((e=>Number(e.dataset.matrixId))),e[(n=n[e.length-1])-1].style.display="none",E(l=I(e.map((e=>Number(e.dataset.matrixId))),n));let t=document.querySelector(".puzzle").querySelectorAll(".block-puzzle");for(let e of t)e.draggable=!0},document.getElementById("shuffle").addEventListener("click",(()=>{let e=Array.from(document.querySelectorAll(".block-puzzle"));n=e.map((e=>Number(e.dataset.matrixId))),e[(n=n[e.length-1])-1].style.display="none",l=I(e.map((e=>Number(e.dataset.matrixId))),n),document.querySelector(".moves").innerHTML=0,g(),z=!0,b();let t=l.flat().map((e=>({value:e,sort:Math.random()}))).sort(((e,t)=>e.sort-t.sort)).map((({value:e})=>e));E(l=I(t,n))})),document.querySelector(".puzzle").addEventListener("click",(e=>{if(!x&&z){const t=e.target.closest(".block-puzzle");if(!t)return;let r=Array.from(document.querySelectorAll(".block-puzzle"));n=(n=r.map((e=>Number(e.dataset.matrixId))))[r.length-1];const o=A(Number(t.dataset.matrixId),l),s=A(n,l);M(o,s)&&(q&&N.play(),T(s,o,l,n),E(l))}})),document.getElementById("easy").addEventListener("click",(()=>{if(!x){g(),b(),z=!0,document.querySelector(".moves").innerHTML=0;let e=Array.from(document.querySelectorAll(".block-puzzle"));n=e.map((e=>Number(e.dataset.matrixId))),e[(n=n[e.length-1])-1].style.display="none";let t=(l=I(e.map((e=>Number(e.dataset.matrixId))),n))[Math.sqrt(n)-1][l[Math.sqrt(n)-1].length-1],r=l[Math.sqrt(n)-1][l[Math.sqrt(n)-1].length-2];l[Math.sqrt(n)-1][l[Math.sqrt(n)-1].length-1]=r,l[Math.sqrt(n)-1][l[Math.sqrt(n)-1].length-2]=t,E(l)}})),document.getElementById("save").addEventListener("click",(()=>{if(!x&&z){e=1e3*Math.sqrt(n);let t=document.querySelector(".moves"),r=Number(t.textContent),o=document.querySelector(".time").textContent;localStorage.setItem(e,JSON.stringify(l)),localStorage.setItem("numMoves",JSON.stringify(r)),localStorage.setItem("time",JSON.stringify(o)),document.getElementById("save-text").style.display="block",setTimeout((()=>{document.getElementById("save-text").style.display="none"}),1e3),k=!0}})),document.getElementById("load").addEventListener("click",(()=>{if(k){let r;switch(l=JSON.parse(localStorage.getItem(e)),z=!0,e/1e3){case 3:S(9),r=document.querySelectorAll(".block-puzzle"),f();break;case 4:S(16),r=document.querySelectorAll(".block-puzzle");for(let e=0;e<r.length;e++)r[e].style.width="25%",r[e].style.height="25%";f();break;case 5:S(25),r=document.querySelectorAll(".block-puzzle");for(let e=0;e<r.length;e++)r[e].style.width="20%",r[e].style.height="20%";f();break;case 6:S(36),r=document.querySelectorAll(".block-puzzle");for(let e=0;e<r.length;e++)r[e].style.width="16.7%",r[e].style.height="16.7%";f();break;case 7:S(49),r=document.querySelectorAll(".block-puzzle");for(let e=0;e<r.length;e++)r[e].style.width="14.3%",r[e].style.height="14.3%";f();break;case 8:S(64),r=document.querySelectorAll(".block-puzzle");for(let e=0;e<r.length;e++)r[e].style.width="12.5%",r[e].style.height="12.5%";f();break;default:console.log("Wrong number of blocks")}E(l);let o=document.querySelector(".moves"),s=document.querySelector(".time");o.innerHTML=`${localStorage.getItem("numMoves")}`,s.innerHTML=`${JSON.parse(localStorage.getItem("time"))}`,n=JSON.parse(localStorage.getItem("time")).split(":"),m=Number(n[2]),u=Number(n[1]),c=Number(n[0]),t=setTimeout(h,1)}var n})),document.querySelector(".puzzle").addEventListener("dragstart",(e=>{z&&e.target.classList.add("selected")})),document.querySelector(".puzzle").addEventListener("dragend",(e=>{z&&e.target.classList.remove("selected")})),document.querySelector(".puzzle").addEventListener("dragover",(e=>{if(z){e.preventDefault();const t=document.querySelector(".selected");let r=t;if(!e.target.classList.contains("puzzle"))return;if(document.querySelector(".selected")){t.classList.remove("selected");let e=Array.from(document.querySelectorAll(".block-puzzle"));n=(n=e.map((e=>Number(e.dataset.matrixId))))[e.length-1];const o=A(Number(r.dataset.matrixId),l),s=A(n,l);M(o,s)&&(q&&N.play(),T(s,o,l,n),E(l))}}})),document.getElementById("results").addEventListener("click",(()=>{L||(z=!1,x=!0,function(){let e=document.querySelector(".results-list"),t=document.querySelectorAll(".item");for(let e=0;e<10;e++)if('"-"'!==localStorage.getItem(`${e}`)&&localStorage.getItem(`${e}`)!==String(null)&&null!==localStorage.getItem(`${e}`)){let l=JSON.parse(JSON.stringify(localStorage.getItem(`${e}`))).split(",");t[e].innerHTML=`You solved the puzzle in ${l[1]} and ${l[0]} moves`}else t[e].innerHTML="-";e.style.display="block",setTimeout((()=>{e.classList.add("open"),setTimeout((()=>{e.classList.remove("open"),setTimeout((()=>{e.style.display="none",z=!0,x=!1}),300)}),4e3)}),300)}())})),document.getElementById("sound").addEventListener("click",(()=>{q?(document.getElementById("sound").style.backgroundColor="green",N.pause(),q=!1):(document.getElementById("sound").style.backgroundColor="#519595",N.play(),q=!0)}));const r=document.querySelector(".three"),o=document.querySelector(".four"),s=document.querySelector(".five"),i=document.querySelector(".six"),a=document.querySelector(".seven"),d=document.querySelector(".eight");r.addEventListener("click",(()=>{z&&(z=!1)})),o.addEventListener("click",(()=>{z&&(z=!1)})),s.addEventListener("click",(()=>{z&&(z=!1)})),i.addEventListener("click",(()=>{z&&(z=!1)})),a.addEventListener("click",(()=>{z&&(z=!1)})),d.addEventListener("click",(()=>{z&&(z=!1)}))}()})();