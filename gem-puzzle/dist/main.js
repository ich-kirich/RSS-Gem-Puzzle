(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var l=e.g.document;if(!t&&l&&(l.currentScript&&(t=l.currentScript.src),!t)){var n=l.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();var t,l,n,r,a,s=60,o="",c=1,i=1,d=1,u=0,m=0,p=0,y=0;function v(){clearTimeout(t),c=1,i=1,d=1,u=0,m=0,p=0,y=0,o="00:00:00",document.querySelector(".time").innerHTML=o}function z(){var e=(new Date).getTime()-l.getTime()-1e3*u;e>999&&u++,u>=i*s?(m=0,i++):(m=parseInt(p/100+u))>=s&&(m-=(i-1)*s),i>c*s?(d=1,c++):(d=parseInt(p/100+i))>=s&&(d-=(c-1)*s),(p=Math.round(e/10))>99&&(p=0),0==p&&(p="00"),p>0&&p<=9&&(p="0"+p),m>0?(a=m,m<10&&(a="0"+m)):a="00",(r=d-1)>0?r<10&&(r="0"+r):r="00",(n=c-1)>0?n<10&&(n="0"+n):n="00",o=n+":"+r+":"+a,document.querySelector(".time").innerHTML=o;let y=document.getElementById("win-text"),v=document.querySelector(".moves");y.innerHTML=`Hooray! You solved the puzzle in ${o} and ${v.textContent} moves!`,t=setTimeout(z,1)}function h(){0==y?(v(),l=new Date,z(),y=1):(clearTimeout(t),y=0)}let f=!1;var b,g,q=new Audio;function x(e,t){let l=[],n=Math.sqrt(t);for(let e=0;e<n;e++)l.push([]);let r=0,a=0;for(let t=0;t<e.length;t++)r>=n&&(a++,r=0),l[a][r]=e[t],r++;return l}function S(e){let t=Array.from(document.querySelectorAll(".block-puzzle"));for(let l=0;l<e.length;l++)for(let n=0;n<e[l].length;n++)k(t[e[l][n]-1],n,l)}function k(e,t,l){e.style.transform=`translate3D(${100*t}%, ${100*l}%, 0)`}function L(e,t){for(let l=0;l<t.length;l++)for(let n=0;n<t[l].length;n++)if(t[l][n]===e)return{x:n,y:l};return null}function w(e,t){const l=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return!(1!==l&&1!==n||e.x!==t.x&&e.y!==t.y)}function A(e,t,l,n){const r=l[e.y][e.x];l[e.y][e.x]=l[t.y][t.x],l[t.y][t.x]=r,function(e,t){const l=new Array(t).fill(0).map(((e,t)=>t+1)),n=e.flat();for(let e=0;e<l.length;e++)if(n[e]!==l[e])return!1;return!0}(l,n)&&function(){const e="won";setTimeout((()=>{let t=document.querySelector(".puzzle"),l=document.querySelector(".win-text");t.classList.add(e),l.classList.add(e),l.classList.remove("win-text"),f=!1,setTimeout((()=>{t.classList.remove(e),l.classList.remove(e),l.classList.add("win-text"),document.querySelector(".moves").innerHTML=0,v()}),1e3)}),300)}();let a=document.querySelector(".moves"),s=Number(a.textContent);a.innerHTML=s+1}function M(){var e=0;let t=Array.from(document.querySelectorAll(".block-puzzle"));e=t.map((e=>Number(e.dataset.matrixId))),t[(e=e[t.length-1])-1].style.display="none",S(x(t.map((e=>Number(e.dataset.matrixId))),e)),v(),document.querySelector(".moves").innerHTML=0;let l=document.querySelector(".puzzle").querySelectorAll(".block-puzzle");for(let e of l)e.draggable=!0}function T(e){let t=document.querySelector(".puzzle");t.innerHTML="";for(let l=1;l<=e;l++){let e=document.createElement("div"),n=document.createElement("span");n.textContent=`${l}`,e.appendChild(n),e.classList.add("block-puzzle"),e.setAttribute("data-matrix-id",`${l}`),t.appendChild(e)}}q.src="./src/music/1.mp3",e.p,document.body.innerHTML='\n    <main>\n        <div class="back">\n            <div class="panel">\n                <div class="buttons">\n                    <button id="shuffle">Shuffle and start</button>\n                    <button id="easy">For easy win</button>\n                </div>\n                <div class="info">\n                    <p>Moves: <span class="moves">0</span></p>\n                    <p>Time: <span class="time">0:00</span></p>\n                </div>\n            </div>\n            <div class="puzzle">\n                <div class="block-puzzle" data-matrix-id="1"><span>1</span></div>\n                <div class="block-puzzle" data-matrix-id="2"><span>2</span></div>\n                <div class="block-puzzle" data-matrix-id="3"><span>3</span></div>\n                <div class="block-puzzle" data-matrix-id="4"><span>4</span></div>\n                <div class="block-puzzle" data-matrix-id="5"><span>5</span></div>\n                <div class="block-puzzle" data-matrix-id="6"><span>6</span></div>\n                <div class="block-puzzle" data-matrix-id="7"><span>7</span></div>\n                <div class="block-puzzle" data-matrix-id="8"><span>8</span></div>\n                <div class="block-puzzle" data-matrix-id="9"><span>9</span></div>\n            </div>\n            <div class="sizes">\n                <p>Other sizes:</p>\n                <div class="three">3x3</div>\n                <div class="four">4x4</div>\n                <div class="five">5x5</div>\n                <div class="six">6x6</div>\n                <div class="seven">7x7</div>\n                <div class="eight">8x8</div>\n            </div>\n            <h2 class="win-text" id="win-text">Вы выиграли!</h2>\n        </div>\n    </main>\n',function(){const e=document.querySelector(".three"),t=document.querySelector(".four"),l=document.querySelector(".five"),n=document.querySelector(".six"),r=document.querySelector(".seven"),a=document.querySelector(".eight");e.addEventListener("click",(()=>{T(9),M()})),t.addEventListener("click",(()=>{T(16);let e=document.querySelectorAll(".block-puzzle");for(let t=0;t<e.length;t++)e[t].style.width="25%",e[t].style.height="25%";M()})),l.addEventListener("click",(()=>{T(25);let e=document.querySelectorAll(".block-puzzle");for(let t=0;t<e.length;t++)e[t].style.width="20%",e[t].style.height="20%";M()})),n.addEventListener("click",(()=>{T(36);let e=document.querySelectorAll(".block-puzzle");for(let t=0;t<e.length;t++)e[t].style.width="16.7%",e[t].style.height="16.7%";M()})),r.addEventListener("click",(()=>{T(49);let e=document.querySelectorAll(".block-puzzle");for(let t=0;t<e.length;t++)e[t].style.width="14.3%",e[t].style.height="14.3%";M()})),a.addEventListener("click",(()=>{T(64);let e=document.querySelectorAll(".block-puzzle");for(let t=0;t<e.length;t++)e[t].style.width="12.5%",e[t].style.height="12.5%";M()}))}(),b=[],g=0,window.onload=function(){let e=Array.from(document.querySelectorAll(".block-puzzle"));g=e.map((e=>Number(e.dataset.matrixId))),e[(g=g[e.length-1])-1].style.display="none",S(b=x(e.map((e=>Number(e.dataset.matrixId))),g));let t=document.querySelector(".puzzle").querySelectorAll(".block-puzzle");for(let e of t)e.draggable=!0},document.getElementById("shuffle").addEventListener("click",(()=>{let e=Array.from(document.querySelectorAll(".block-puzzle"));g=e.map((e=>Number(e.dataset.matrixId))),e[(g=g[e.length-1])-1].style.display="none",b=x(e.map((e=>Number(e.dataset.matrixId))),g),document.querySelector(".moves").innerHTML=0,v(),f=!0,h();let t=b.flat().map((e=>({value:e,sort:Math.random()}))).sort(((e,t)=>e.sort-t.sort)).map((({value:e})=>e));S(b=x(t,g))})),document.querySelector(".puzzle").addEventListener("click",(e=>{if(f){const t=e.target.closest(".block-puzzle");if(!t)return;let l=Array.from(document.querySelectorAll(".block-puzzle"));g=(g=l.map((e=>Number(e.dataset.matrixId))))[l.length-1];const n=L(Number(t.dataset.matrixId),b),r=L(g,b);w(n,r)&&(q.play(),A(r,n,b,g),S(b))}})),document.getElementById("easy").addEventListener("click",(()=>{f=!0,v(),h(),document.querySelector(".moves").innerHTML=0;let e=Array.from(document.querySelectorAll(".block-puzzle"));g=e.map((e=>Number(e.dataset.matrixId))),e[(g=g[e.length-1])-1].style.display="none";let t=(b=x(e.map((e=>Number(e.dataset.matrixId))),g))[Math.sqrt(g)-1][b[Math.sqrt(g)-1].length-1],l=b[Math.sqrt(g)-1][b[Math.sqrt(g)-1].length-2];b[Math.sqrt(g)-1][b[Math.sqrt(g)-1].length-1]=l,b[Math.sqrt(g)-1][b[Math.sqrt(g)-1].length-2]=t,S(b)})),document.querySelector(".puzzle").addEventListener("dragstart",(e=>{f&&e.target.classList.add("selected")})),document.querySelector(".puzzle").addEventListener("dragend",(e=>{f&&e.target.classList.remove("selected")})),document.querySelector(".puzzle").addEventListener("dragover",(e=>{if(f){e.preventDefault();const t=document.querySelector(".selected");let l=t;if(!e.target.classList.contains("puzzle"))return;if(document.querySelector(".selected")){t.classList.remove("selected");let e=Array.from(document.querySelectorAll(".block-puzzle"));g=(g=e.map((e=>Number(e.dataset.matrixId))))[e.length-1];const n=L(Number(l.dataset.matrixId),b),r=L(g,b);w(n,r)&&(q.play(),A(r,n,b,g),S(b))}}}))})();