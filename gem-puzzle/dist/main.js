(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var l=n.getElementsByTagName("script");l.length&&(t=l[l.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();var t,n,l,r,a,s=60,i="",o=1,c=1,d=1,u=0,m=0,p=0,v=0;function y(){clearTimeout(t),o=1,c=1,d=1,u=0,m=0,p=0,v=0,i="00:00:00",document.querySelector(".time").innerHTML=i}function h(){var e=(new Date).getTime()-n.getTime()-1e3*u;e>999&&u++,u>=c*s?(m=0,c++):(m=parseInt(p/100+u))>=s&&(m-=(c-1)*s),c>o*s?(d=1,o++):(d=parseInt(p/100+c))>=s&&(d-=(o-1)*s),(p=Math.round(e/10))>99&&(p=0),0==p&&(p="00"),p>0&&p<=9&&(p="0"+p),m>0?(a=m,m<10&&(a="0"+m)):a="00",(r=d-1)>0?r<10&&(r="0"+r):r="00",(l=o-1)>0?l<10&&(l="0"+l):l="00",i=l+":"+r+":"+a,document.querySelector(".time").innerHTML=i;let v=document.getElementById("win-text"),y=document.querySelector(".moves");v.innerHTML=`Hooray! You solved the puzzle in ${i} and ${y.textContent} moves!`,t=setTimeout(h,1)}function f(){0==v?(y(),n=new Date,h(),v=1):(clearTimeout(t),v=0)}let z=!1;var b,x,g=new Audio;function q(e,t){let n=[],l=Math.sqrt(t);for(let e=0;e<l;e++)n.push([]);let r=0,a=0;for(let t=0;t<e.length;t++)r>=l&&(a++,r=0),n[a][r]=e[t],r++;return n}function S(e){let t=Array.from(document.querySelectorAll(".block-puzzle"));for(let n=0;n<e.length;n++)for(let l=0;l<e[n].length;l++)k(t[e[n][l]-1],l,n)}function k(e,t,n){e.style.transform=`translate3D(${100*t}%, ${100*n}%, 0)`}function w(e,t){for(let n=0;n<t.length;n++)for(let l=0;l<t[n].length;l++)if(t[n][l]===e)return{x:l,y:n};return null}function L(){var e=0;let t=Array.from(document.querySelectorAll(".block-puzzle"));e=t.map((e=>Number(e.dataset.matrixId))),t[(e=e[t.length-1])-1].style.display="none",S(q(t.map((e=>Number(e.dataset.matrixId))),e)),y(),document.querySelector(".moves").innerHTML=0}function M(e){let t=document.querySelector(".puzzle");t.innerHTML="";for(let n=1;n<=e;n++){let e=document.createElement("div"),l=document.createElement("span");l.textContent=`${n}`,e.appendChild(l),e.classList.add("block-puzzle"),e.setAttribute("data-matrix-id",`${n}`),t.appendChild(e)}}g.src="./src/music/1.mp3",e.p,document.body.innerHTML='\n    <main>\n        <div class="back">\n            <div class="panel">\n                <div class="buttons">\n                    <button id="shuffle">Shuffle and start</button>\n                    <button id="easy">For easy win</button>\n                </div>\n                <div class="info">\n                    <p>Moves: <span class="moves">0</span></p>\n                    <p>Time: <span class="time">0:00</span></p>\n                </div>\n            </div>\n            <div class="puzzle">\n                <div class="block-puzzle" data-matrix-id="1"><span>1</span></div>\n                <div class="block-puzzle" data-matrix-id="2"><span>2</span></div>\n                <div class="block-puzzle" data-matrix-id="3"><span>3</span></div>\n                <div class="block-puzzle" data-matrix-id="4"><span>4</span></div>\n                <div class="block-puzzle" data-matrix-id="5"><span>5</span></div>\n                <div class="block-puzzle" data-matrix-id="6"><span>6</span></div>\n                <div class="block-puzzle" data-matrix-id="7"><span>7</span></div>\n                <div class="block-puzzle" data-matrix-id="8"><span>8</span></div>\n                <div class="block-puzzle" data-matrix-id="9"><span>9</span></div>\n            </div>\n            <div class="sizes">\n                <p>Other sizes:</p>\n                <div class="three">3x3</div>\n                <div class="four">4x4</div>\n                <div class="five">5x5</div>\n                <div class="six">6x6</div>\n                <div class="seven">7x7</div>\n                <div class="eight">8x8</div>\n            </div>\n            <h2 class="win-text" id="win-text">Вы выиграли!</h2>\n        </div>\n    </main>\n',function(){const e=document.querySelector(".three"),t=document.querySelector(".four"),n=document.querySelector(".five"),l=document.querySelector(".six"),r=document.querySelector(".seven"),a=document.querySelector(".eight");e.addEventListener("click",(()=>{M(9),L()})),t.addEventListener("click",(()=>{M(16);let e=document.querySelectorAll(".block-puzzle");for(let t=0;t<e.length;t++)e[t].style.width="25%",e[t].style.height="25%";L()})),n.addEventListener("click",(()=>{M(25);let e=document.querySelectorAll(".block-puzzle");for(let t=0;t<e.length;t++)e[t].style.width="20%",e[t].style.height="20%";L()})),l.addEventListener("click",(()=>{M(36);let e=document.querySelectorAll(".block-puzzle");for(let t=0;t<e.length;t++)e[t].style.width="16.7%",e[t].style.height="16.7%";L()})),r.addEventListener("click",(()=>{M(49);let e=document.querySelectorAll(".block-puzzle");for(let t=0;t<e.length;t++)e[t].style.width="14.3%",e[t].style.height="14.3%";L()})),a.addEventListener("click",(()=>{M(64);let e=document.querySelectorAll(".block-puzzle");for(let t=0;t<e.length;t++)e[t].style.width="12.5%",e[t].style.height="12.5%";L()}))}(),b=[],x=0,window.onload=function(){let e=Array.from(document.querySelectorAll(".block-puzzle"));x=e.map((e=>Number(e.dataset.matrixId))),e[(x=x[e.length-1])-1].style.display="none",S(b=q(e.map((e=>Number(e.dataset.matrixId))),x))},document.getElementById("shuffle").addEventListener("click",(()=>{let e=Array.from(document.querySelectorAll(".block-puzzle"));x=e.map((e=>Number(e.dataset.matrixId))),e[(x=x[e.length-1])-1].style.display="none",b=q(e.map((e=>Number(e.dataset.matrixId))),x),document.querySelector(".moves").innerHTML=0,y(),z=!0,f();let t=b.flat().map((e=>({value:e,sort:Math.random()}))).sort(((e,t)=>e.sort-t.sort)).map((({value:e})=>e));S(b=q(t,x))})),document.querySelector(".puzzle").addEventListener("click",(e=>{if(z){const t=e.target.closest(".block-puzzle");if(!t)return;let n=Array.from(document.querySelectorAll(".block-puzzle"));x=(x=n.map((e=>Number(e.dataset.matrixId))))[n.length-1];const l=w(Number(t.dataset.matrixId),b),r=w(x,b);(function(e,t){const n=Math.abs(e.x-t.x),l=Math.abs(e.y-t.y);return!(1!==n&&1!==l||e.x!==t.x&&e.y!==t.y)})(l,r)&&(g.play(),function(e,t,n,l){const r=n[e.y][e.x];n[e.y][e.x]=n[t.y][t.x],n[t.y][t.x]=r,function(e,t){const n=new Array(t).fill(0).map(((e,t)=>t+1)),l=e.flat();for(let e=0;e<n.length;e++)if(l[e]!==n[e])return!1;return!0}(n,l)&&function(){const e="won";setTimeout((()=>{let t=document.querySelector(".puzzle"),n=document.querySelector(".win-text");t.classList.add(e),n.classList.add(e),n.classList.remove("win-text"),z=!1,setTimeout((()=>{t.classList.remove(e),n.classList.remove(e),n.classList.add("win-text"),document.querySelector(".moves").innerHTML=0,y()}),2e3)}),300)}();let a=document.querySelector(".moves"),s=Number(a.textContent);a.innerHTML=s+1}(r,l,b,x),S(b))}})),document.getElementById("easy").addEventListener("click",(()=>{z=!0,y(),f(),document.querySelector(".moves").innerHTML=0;let e=Array.from(document.querySelectorAll(".block-puzzle"));x=e.map((e=>Number(e.dataset.matrixId))),e[(x=x[e.length-1])-1].style.display="none";let t=(b=q(e.map((e=>Number(e.dataset.matrixId))),x))[Math.sqrt(x)-1][b[Math.sqrt(x)-1].length-1],n=b[Math.sqrt(x)-1][b[Math.sqrt(x)-1].length-2];b[Math.sqrt(x)-1][b[Math.sqrt(x)-1].length-1]=n,b[Math.sqrt(x)-1][b[Math.sqrt(x)-1].length-2]=t,S(b)}))})();