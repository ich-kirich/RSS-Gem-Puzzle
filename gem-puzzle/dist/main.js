(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var a=n.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();var e,n,a,s,r,i=60,l="",o=1,c=1,u=1,d=0,m=0,p=0,v=0;function f(){clearTimeout(e),o=1,c=1,u=1,d=0,m=0,p=0,v=0,l="00:00:00",document.querySelector(".time").innerHTML=l}function y(){var t=(new Date).getTime()-n.getTime()-1e3*d;t>999&&d++,d>=c*i?(m=0,c++):(m=parseInt(p/100+d))>=i&&(m-=(c-1)*i),c>o*i?(u=1,o++):(u=parseInt(p/100+c))>=i&&(u-=(o-1)*i),(p=Math.round(t/10))>99&&(p=0),0==p&&(p="00"),p>0&&p<=9&&(p="0"+p),m>0?(r=m,m<10&&(r="0"+m)):r="00",(s=u-1)>0?s<10&&(s="0"+s):s="00",(a=o-1)>0?a<10&&(a="0"+a):a="00",l=a+":"+s+":"+r,document.querySelector(".time").innerHTML=l;let v=document.querySelector(".win-text"),f=document.querySelector(".moves");v.innerHTML=`Hooray! You solved the puzzle in ${l} and ${f.textContent} moves!`,e=setTimeout(y,1)}let z=!1;var b=new Audio;function h(t,e){let n=[],a=Math.sqrt(e);for(let t=0;t<a;t++)n.push([]);let s=0,r=0;for(let e=0;e<t.length;e++)s>=a&&(r++,s=0),n[r][s]=t[e],s++;return n}function x(t){let e=Array.from(document.querySelectorAll(".block-puzzle"));for(let n=0;n<t.length;n++)for(let a=0;a<t[n].length;a++)g(e[t[n][a]-1],a,n)}function g(t,e,n){t.style.transform=`translate3D(${100*e}%, ${100*n}%, 0)`}function w(t,e){for(let n=0;n<e.length;n++)for(let a=0;a<e[n].length;a++)if(e[n][a]===t)return{x:a,y:n};return null}b.src="./src/music/1.mp3",t.p,document.body.innerHTML='\n    <main>\n        <div class="back">\n            <div class="panel">\n                <div class="buttons">\n                    <button id="shuffle">Shuffle and start</button>\n                </div>\n                <div class="info">\n                    <p>Moves: <span class="moves">0</span></p>\n                    <p>Time: <span class="time">0:00</span></p>\n                </div>\n            </div>\n            <div class="puzzle">\n                <div class="block-puzzle" data-matrix-id="1"><span>1</span></div>\n                <div class="block-puzzle" data-matrix-id="2"><span>2</span></div>\n                <div class="block-puzzle" data-matrix-id="3"><span>3</span></div>\n                <div class="block-puzzle" data-matrix-id="4"><span>4</span></div>\n                <div class="block-puzzle" data-matrix-id="5"><span>5</span></div>\n                <div class="block-puzzle" data-matrix-id="6"><span>6</span></div>\n                <div class="block-puzzle" data-matrix-id="7"><span>7</span></div>\n                <div class="block-puzzle" data-matrix-id="8"><span>8</span></div>\n                <div class="block-puzzle" data-matrix-id="9"><span>9</span></div>\n            </div>\n            <div class="sizes"></div>\n            <h2 class="win-text">Вы выиграли!</h2>\n        </div>\n    </main>\n',function(){const t=document.querySelector(".puzzle"),a=Array.from(document.querySelectorAll(".block-puzzle"));let s=a.map((t=>Number(t.dataset.matrixId)));s=s[a.length-1],a[s-1].style.display="none";let r=h(a.map((t=>Number(t.dataset.matrixId))),s);x(r),document.getElementById("shuffle").addEventListener("click",(()=>{document.querySelector(".moves").innerHTML=0,f(),z=!0,0==v?(f(),n=new Date,y(),v=1):(clearTimeout(e),v=0);let t=r.flat().map((t=>({value:t,sort:Math.random()}))).sort(((t,e)=>t.sort-e.sort)).map((({value:t})=>t));r=h(t,s),x(r)})),t.addEventListener("click",(t=>{if(z){const e=t.target.closest(".block-puzzle");if(!e)return;const n=w(Number(e.dataset.matrixId),r),a=w(s,r);(function(t,e){const n=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);return!(1!==n&&1!==a||t.x!==e.x&&t.y!==e.y)})(n,a)&&(b.play(),function(t,e,n,a){const s=n[t.y][t.x];n[t.y][t.x]=n[e.y][e.x],n[e.y][e.x]=s,function(t,e){const n=new Array(e).fill(0).map(((t,e)=>e+1)),a=t.flat();for(let t=0;t<n.length;t++)if(a[t]!==n[t])return!1;return!0}(n,a)&&function(){const t="won";setTimeout((()=>{let e=document.querySelector(".puzzle"),n=document.querySelector(".win-text");e.classList.add(t),n.classList.add(t),n.classList.remove("win-text"),z=!1,setTimeout((()=>{e.classList.remove(t),n.classList.remove(t),n.classList.add("win-text"),document.querySelector(".moves").innerHTML=0,f()}),1e3)}),300)}();let r=document.querySelector(".moves"),i=Number(r.textContent);r.innerHTML=i+1}(a,n,r,s),x(r))}}))}()})();